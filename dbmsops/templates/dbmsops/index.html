<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Train System - Home</title>
</head>
<body>
    {% include "dbmsops/navbar.html" %}
    <div class="container text-center mt-5">
        <div class="row align-items-center">
          <div class="col-5 align-items-center">
            <div class="row">
                <label for="table-selection" class="mb-2">Select a table</label>
                <select id="table-selection" class="form-select" aria-label="Select database table name">
                  {% for id, tb_details in db_tables.items %}
                    <option value={{ forloop.counter }}>{{ tb_details.tb_name }}</option>
                  {% endfor %}
                </select>
            </div>
            <div class="row justify-content-center mt-5">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Table Schema</h5>
                  {% for id, tb_details in db_tables.items %}
                    <p id="table-schema">{{ tb_details.tb_name }}{{ tb_details.tb_schema }}</p>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
          <div class="col-7" id="insert-data-entry-form">
            {% include "dbmsops/forms/passenger_form.html"%}
          </div>
        </div>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script>
      $("#table-selection").change(function () {
        const url = '/ajax/load-data-entry-form/';  
        const dboption = $(this).val();
        $.ajax({                      
          url: url,                    
          data: {
            'dboption': dboption       
          },
          success: function (data) {  
            $("#insert-data-entry-form").html(data);  
          }
        });
      });
    </script>
</body>
</html>